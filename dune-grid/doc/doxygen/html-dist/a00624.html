<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>dune-grid: indexidset.hh Source File (dune-grid )</title>
  <link rel="stylesheet" type="text/css" href="./dune-doxy.css">
  <link rel="stylesheet" type="text/css" href="./tabs.css">
</head>
<div class="main">
<div class="doxygen">
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_5edca94048dae04696b7e65d07cd8e9c.html">grid</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_cbb40b532500855a4d3fb2d96695f9bb.html">common</a>
  </div>
</div>
<div class="contents">
<h1>indexidset.hh</h1><a href="a00406.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// $Id: indexidset.hh 4106 2008-04-08 09:27:17Z robertk $</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="preprocessor">#ifndef DUNE_INDEXIDSET_HH</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">#define DUNE_INDEXIDSET_HH</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;dune/common/exceptions.hh&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;dune/common/helpertemplates.hh&gt;</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;dune/common/bartonnackmanifcheck.hh&gt;</span>
<a name="l00012"></a>00012 
<a name="l00018"></a>00018 <span class="keyword">namespace </span>Dune
<a name="l00019"></a>00019 {
<a name="l00073"></a>00073   <span class="keyword">template</span>&lt;<span class="keyword">class</span> Gr<span class="keywordtype">id</span>Imp, <span class="keyword">class</span> IndexSetImp, <span class="keyword">class</span> IndexSetTypes&gt;
<a name="l00074"></a><a class="code" href="a00145.html">00074</a>   <span class="keyword">class </span><a class="code" href="a00145.html" title="Index Set Interface base class.">IndexSet</a> {
<a name="l00075"></a>00075   <span class="keyword">public</span>:
<a name="l00078"></a>00078         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> cd&gt;
<a name="l00079"></a><a class="code" href="a00146.html">00079</a>         <span class="keyword">struct </span><a class="code" href="a00146.html" title="Define types needed to iterate over the entities in the index set.">Codim</a>
<a name="l00080"></a>00080         {
<a name="l00081"></a>00081 
<a name="l00083"></a>00083           <span class="keyword">template</span> &lt;PartitionIteratorType pitype&gt;
<a name="l00084"></a><a class="code" href="a00147.html">00084</a>           <span class="keyword">struct </span><a class="code" href="a00147.html" title="Define types needed to iterate over entities of a given partition type.">Partition</a>
<a name="l00085"></a>00085           {
<a name="l00088"></a><a class="code" href="a00147.html#4eec7536baeda3d8b3e4935752d78ca0">00088</a>                 <span class="keyword">typedef</span> <span class="keyword">typename</span> IndexSetTypes::template <a class="code" href="a00146.html" title="Define types needed to iterate over the entities in the index set.">Codim&lt;cd&gt;::template</a> <a class="code" href="a00147.html" title="Define types needed to iterate over entities of a given partition type.">Partition&lt;pitype&gt;::Iterator</a> <a class="code" href="a00147.html#4eec7536baeda3d8b3e4935752d78ca0" title="The iterator needed to iterate over the entities of a given codim and partition type...">Iterator</a>;
<a name="l00089"></a>00089           };
<a name="l00090"></a>00090         };
<a name="l00091"></a>00091 
<a name="l00093"></a><a class="code" href="a00145.html#e111915423721036f1ac82ac106354b6">00093</a>   <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="a00145.html#e111915423721036f1ac82ac106354b6" title="type of index (in upcomming version this is unsigned int)">IndexType</a>;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095         <span class="comment">//===========================================================</span>
<a name="l00099"></a>00099 <span class="comment"></span>        <span class="comment">//===========================================================</span>
<a name="l00100"></a>00100 
<a name="l00107"></a>00107     <span class="comment">/*</span>
<a name="l00108"></a>00108 <span class="comment">      We use the remove_const to extract the Type from the mutable class,</span>
<a name="l00109"></a>00109 <span class="comment">      because the const class is not instatiated yet.</span>
<a name="l00110"></a>00110 <span class="comment">    */</span>
<a name="l00111"></a>00111         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> cc&gt;
<a name="l00112"></a><a class="code" href="a00145.html#8ec792aaa5a02d0c78d1f2b1faf3eaf8">00112</a>         <span class="keywordtype">int</span> <a class="code" href="a00145.html#8ec792aaa5a02d0c78d1f2b1faf3eaf8" title="Map entity to index. The result of calling this method with an entity that is not...">index</a> (<span class="keyword">const</span> <span class="keyword">typename</span> remove_const&lt;GridImp&gt;::type::
<a name="l00113"></a>00113                Traits::template Codim&lt;cc&gt;::Entity&amp; e)<span class="keyword"> const </span>
<a name="l00114"></a>00114 <span class="keyword">        </span>{
<a name="l00115"></a>00115     CHECK_INTERFACE_IMPLEMENTATION((asImp().<span class="keyword">template</span> index&lt;cc&gt;(e)));
<a name="l00116"></a>00116     <span class="keywordflow">return</span> asImp().template index&lt;cc&gt;(e);
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118 
<a name="l00128"></a>00128     <span class="keyword">template</span>&lt;<span class="keyword">class</span> EntityType&gt;
<a name="l00129"></a><a class="code" href="a00145.html#6dcf64988579bc8dd2045c36ba862853">00129</a>     <span class="keywordtype">int</span> <a class="code" href="a00145.html#8ec792aaa5a02d0c78d1f2b1faf3eaf8" title="Map entity to index. The result of calling this method with an entity that is not...">index</a> (<span class="keyword">const</span> EntityType&amp; e)<span class="keyword"> const</span>
<a name="l00130"></a>00130 <span class="keyword">    </span>{
<a name="l00131"></a>00131       <span class="keyword">enum</span> { cc = EntityType::codimension };
<a name="l00132"></a>00132       CHECK_INTERFACE_IMPLEMENTATION((asImp().<span class="keyword">template</span> index&lt;cc&gt;(e)));
<a name="l00133"></a>00133       <span class="keywordflow">return</span> asImp().template index&lt;cc&gt;(e);
<a name="l00134"></a>00134     }
<a name="l00135"></a>00135 
<a name="l00144"></a>00144     <span class="comment">/*</span>
<a name="l00145"></a>00145 <span class="comment">      We use the remove_const to extract the Type from the mutable class,</span>
<a name="l00146"></a>00146 <span class="comment">      because the const class is not instatiated yet.</span>
<a name="l00147"></a>00147 <span class="comment">    */</span>
<a name="l00148"></a>00148         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> cc&gt;
<a name="l00149"></a><a class="code" href="a00145.html#200f01d1142940f86df3a43ebd51dfde">00149</a>         <span class="keywordtype">int</span> <a class="code" href="a00145.html#200f01d1142940f86df3a43ebd51dfde" title="Map subentity of codim cc of codim 0 entity to index. The result of calling this...">subIndex</a> (<span class="keyword">const</span> <span class="keyword">typename</span> remove_const&lt;GridImp&gt;::type::
<a name="l00150"></a>00150                   Traits::template Codim&lt;0&gt;::Entity&amp; e, <span class="keywordtype">int</span> i)<span class="keyword"> const</span>
<a name="l00151"></a>00151 <span class="keyword">        </span>{
<a name="l00152"></a>00152     CHECK_INTERFACE_IMPLEMENTATION((asImp().<span class="keyword">template</span> subIndex&lt;cc&gt;(e,i)));
<a name="l00153"></a>00153     <span class="keywordflow">return</span> asImp().template subIndex&lt;cc&gt;(e,i);
<a name="l00154"></a>00154         }
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 
<a name="l00158"></a>00158         <span class="comment">//===========================================================</span>
<a name="l00162"></a>00162 <span class="comment"></span>        <span class="comment">//===========================================================</span>
<a name="l00163"></a>00163 
<a name="l00171"></a><a class="code" href="a00145.html#751aa883907a8a8902d37c4b52f97976">00171</a>         <span class="keyword">const</span> std::vector&lt;GeometryType&gt;&amp; <a class="code" href="a00145.html#751aa883907a8a8902d37c4b52f97976" title="Return vector with all geometry types of entities in domain of index map. Return...">geomTypes</a> (<span class="keywordtype">int</span> codim)<span class="keyword"> const</span>
<a name="l00172"></a>00172 <span class="keyword">        </span>{
<a name="l00173"></a>00173       CHECK_INTERFACE_IMPLEMENTATION((asImp().<a class="code" href="a00145.html#751aa883907a8a8902d37c4b52f97976" title="Return vector with all geometry types of entities in domain of index map. Return...">geomTypes</a>(codim)));
<a name="l00174"></a>00174           <span class="keywordflow">return</span> asImp().geomTypes(codim);
<a name="l00175"></a>00175         }
<a name="l00176"></a>00176 
<a name="l00182"></a><a class="code" href="a00145.html#bf6d5aad4df0871ee69c1906fbd446fe">00182</a>         <span class="keywordtype">int</span> <a class="code" href="a00145.html#bf6d5aad4df0871ee69c1906fbd446fe" title="Return total number of entities of given geometry type in entity set .">size</a> (GeometryType type)<span class="keyword"> const</span>
<a name="l00183"></a>00183 <span class="keyword">        </span>{
<a name="l00184"></a>00184     CHECK_INTERFACE_IMPLEMENTATION((asImp().<a class="code" href="a00145.html#bf6d5aad4df0871ee69c1906fbd446fe" title="Return total number of entities of given geometry type in entity set .">size</a>(type)));
<a name="l00185"></a>00185     <span class="keywordflow">return</span> asImp().size(type);
<a name="l00186"></a>00186         }
<a name="l00187"></a>00187 
<a name="l00194"></a><a class="code" href="a00145.html#17692de9f61ac427e32b257ee47b49ed">00194</a>     <span class="keywordtype">int</span> <a class="code" href="a00145.html#bf6d5aad4df0871ee69c1906fbd446fe" title="Return total number of entities of given geometry type in entity set .">size</a> (<span class="keywordtype">int</span> codim)<span class="keyword"> const</span>
<a name="l00195"></a>00195 <span class="keyword">    </span>{
<a name="l00196"></a>00196       CHECK_INTERFACE_IMPLEMENTATION((asImp().<a class="code" href="a00145.html#bf6d5aad4df0871ee69c1906fbd446fe" title="Return total number of entities of given geometry type in entity set .">size</a>(codim)));
<a name="l00197"></a>00197       <span class="keywordflow">return</span> asImp().size(codim);
<a name="l00198"></a>00198     }
<a name="l00199"></a>00199 
<a name="l00202"></a>00202     <span class="keyword">template</span>&lt;<span class="keyword">class</span> EntityType&gt;
<a name="l00203"></a><a class="code" href="a00145.html#ecb6cde876b286d5af8615aad26cbac2">00203</a>     <span class="keywordtype">bool</span> <a class="code" href="a00145.html#ecb6cde876b286d5af8615aad26cbac2" title="Return true if the given entity is contained in .">contains</a> (<span class="keyword">const</span> EntityType&amp; e)<span class="keyword"> const</span>
<a name="l00204"></a>00204 <span class="keyword">    </span>{
<a name="l00205"></a>00205       CHECK_INTERFACE_IMPLEMENTATION((asImp().<a class="code" href="a00145.html#ecb6cde876b286d5af8615aad26cbac2" title="Return true if the given entity is contained in .">contains</a>(e)));
<a name="l00206"></a>00206       <span class="keywordflow">return</span> asImp().contains(e);
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208 
<a name="l00212"></a>00212         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> cd, PartitionIteratorType pitype&gt;
<a name="l00213"></a><a class="code" href="a00145.html#fcaa934b60bcc687c2a629f080db288d">00213</a>         <span class="keyword">typename</span> Codim&lt;cd&gt;::template Partition&lt;pitype&gt;::Iterator <a class="code" href="a00145.html#fcaa934b60bcc687c2a629f080db288d" title="Iterator to first entity of given codimension and partition type in . The iterator...">begin</a> ()<span class="keyword"> const</span>
<a name="l00214"></a>00214 <span class="keyword">        </span>{
<a name="l00215"></a>00215     CHECK_INTERFACE_IMPLEMENTATION((asImp().begin&lt;cd,pitype&gt;()));
<a name="l00216"></a>00216           <span class="keywordflow">return</span> asImp().begin&lt;cd,pitype&gt;();
<a name="l00217"></a>00217         }
<a name="l00218"></a>00218   
<a name="l00222"></a>00222         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> cd, PartitionIteratorType pitype&gt;
<a name="l00223"></a><a class="code" href="a00145.html#5913d4f270c5d44161488b28d95b4236">00223</a>         <span class="keyword">typename</span> Codim&lt;cd&gt;::template Partition&lt;pitype&gt;::Iterator <a class="code" href="a00145.html#5913d4f270c5d44161488b28d95b4236" title="Iterator to one past the last entity of given codim and partition type in . The iterator...">end</a> ()<span class="keyword"> const</span>
<a name="l00224"></a>00224 <span class="keyword">        </span>{
<a name="l00225"></a>00225     CHECK_INTERFACE_IMPLEMENTATION((asImp().end&lt;cd,pitype&gt;()));
<a name="l00226"></a>00226           <span class="keywordflow">return</span> asImp().end&lt;cd,pitype&gt;();
<a name="l00227"></a>00227         }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230         <span class="comment">// Must be explicitely defined although this class should get a default constructor.</span>
<a name="l00231"></a>00231     <a class="code" href="a00145.html" title="Index Set Interface base class.">IndexSet</a>() {}
<a name="l00232"></a>00232 
<a name="l00233"></a>00233   <span class="keyword">private</span>:
<a name="l00235"></a>00235     IndexSet(<span class="keyword">const</span> IndexSet&amp;);
<a name="l00237"></a>00237     IndexSet&amp; operator=(<span class="keyword">const</span> IndexSet&amp;);
<a name="l00238"></a>00238 
<a name="l00240"></a>00240           IndexSetImp&amp; asImp () {<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>IndexSetImp &amp;<span class="keyword">&gt;</span> (*this);}
<a name="l00242"></a>00242           <span class="keyword">const</span> IndexSetImp&amp; asImp ()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>IndexSetImp &amp;<span class="keyword">&gt;</span>(*this);}
<a name="l00243"></a>00243   };
<a name="l00244"></a>00244 
<a name="l00245"></a>00245 <span class="preprocessor">#undef CHECK_INTERFACE_IMPLEMENTATION</span>
<a name="l00246"></a>00246 <span class="preprocessor"></span><span class="preprocessor">#undef CHECK_AND_CALL_INTERFACE_IMPLEMENTATION</span>
<a name="l00247"></a>00247 <span class="preprocessor"></span>
<a name="l00251"></a>00251   <span class="keyword">template</span>&lt;<span class="keyword">class</span> Gr<span class="keywordtype">id</span>Imp, <span class="keyword">class</span> IndexSetImp, <span class="keyword">class</span> IndexSetTypes&gt;
<a name="l00252"></a><a class="code" href="a00148.html">00252</a>   <span class="keyword">class </span><a class="code" href="a00148.html" title="Provide default implementation of method if IndexSet.">IndexSetDefaultImplementation</a> : 
<a name="l00253"></a>00253     <span class="keyword">public</span> <a class="code" href="a00145.html" title="Index Set Interface base class.">IndexSet</a>&lt;GridImp,IndexSetImp,IndexSetTypes&gt; 
<a name="l00254"></a>00254   {
<a name="l00255"></a>00255   <span class="keyword">public</span>:
<a name="l00258"></a>00258     <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> cd&gt;
<a name="l00259"></a><a class="code" href="a00149.html">00259</a>     <span class="keyword">struct </span><a class="code" href="a00146.html" title="Define types needed to iterate over the entities in the index set.">Codim</a>
<a name="l00260"></a>00260     {
<a name="l00261"></a>00261 
<a name="l00263"></a>00263       <span class="keyword">template</span> &lt;PartitionIteratorType pitype&gt;
<a name="l00264"></a><a class="code" href="a00150.html">00264</a>       <span class="keyword">struct </span><a class="code" href="a00150.html" title="Define types needed to iterate over entities of a given partition type.">Partition</a>
<a name="l00265"></a>00265       {
<a name="l00268"></a><a class="code" href="a00150.html#7ce7f05873396a3c0c0693d882da8c07">00268</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> IndexSetTypes::template <a class="code" href="a00146.html" title="Define types needed to iterate over the entities in the index set.">Codim&lt;cd&gt;::template</a> <a class="code" href="a00150.html" title="Define types needed to iterate over entities of a given partition type.">Partition&lt;pitype&gt;::Iterator</a> <a class="code" href="a00150.html#7ce7f05873396a3c0c0693d882da8c07" title="The iterator needed to iterate over the entities of a given codim and partition type...">Iterator</a>;
<a name="l00269"></a>00269       };
<a name="l00270"></a>00270     };
<a name="l00271"></a>00271 
<a name="l00284"></a>00284     <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> cc&gt;
<a name="l00285"></a><a class="code" href="a00148.html#7dfec044882a29ef13b6fb78ffc5a4a4">00285</a>     <span class="keywordtype">int</span> <a class="code" href="a00148.html#7dfec044882a29ef13b6fb78ffc5a4a4" title="Return total number of entities of given codim as a sum for all geometry types in...">subIndex</a> (<span class="keyword">const</span> <span class="keyword">typename</span> remove_const&lt;GridImp&gt;::type::
<a name="l00286"></a>00286                     Traits::template <a class="code" href="a00146.html" title="Define types needed to iterate over the entities in the index set.">Codim&lt;0&gt;::Entity</a>&amp; e, <span class="keywordtype">int</span> i)<span class="keyword"> const</span>
<a name="l00287"></a>00287 <span class="keyword">    </span>{
<a name="l00288"></a>00288       <span class="keywordflow">return</span> this-&gt;<a class="code" href="a00145.html#8ec792aaa5a02d0c78d1f2b1faf3eaf8" title="Map entity to index. The result of calling this method with an entity that is not...">index</a>( *(e.template entity&lt;cc&gt;(i) ));
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290 
<a name="l00298"></a><a class="code" href="a00148.html#ad4160829326bc6c0ad75cd829ea04c4">00298</a>     <span class="keywordtype">int</span> <a class="code" href="a00148.html#ad4160829326bc6c0ad75cd829ea04c4" title="Return total number of entities of given codim in the entity set . This is simply...">size</a> (<span class="keywordtype">int</span> codim)<span class="keyword"> const</span>
<a name="l00299"></a>00299 <span class="keyword">    </span>{
<a name="l00300"></a>00300       <span class="keywordtype">int</span> s=0;
<a name="l00301"></a>00301       <span class="keyword">const</span> std::vector&lt;GeometryType&gt;&amp; geomTs = asImp().geomTypes(codim); 
<a name="l00302"></a>00302       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;geomTs.size(); ++i)
<a name="l00303"></a>00303       s += asImp().size(geomTs[i]);
<a name="l00304"></a>00304       <span class="keywordflow">return</span> s;
<a name="l00305"></a>00305     }
<a name="l00306"></a>00306 
<a name="l00309"></a>00309     <span class="keyword">template</span>&lt;<span class="keyword">class</span> EntityType&gt;
<a name="l00310"></a><a class="code" href="a00148.html#8f21e1f09709ea289c5e79039c83473b">00310</a>     <span class="keywordtype">bool</span> <a class="code" href="a00148.html#8f21e1f09709ea289c5e79039c83473b" title="Return true if the given entity is contained in .">contains</a> (<span class="keyword">const</span> EntityType&amp; e)<span class="keyword"> const</span>
<a name="l00311"></a>00311 <span class="keyword">    </span>{
<a name="l00312"></a>00312       <span class="keyword">enum</span> { cd = EntityType::codimension };
<a name="l00313"></a>00313       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00146.html" title="Define types needed to iterate over the entities in the index set.">Codim&lt;cd&gt;::template</a> Partition&lt;All_Partition&gt;::Iterator IteratorType; 
<a name="l00314"></a>00314       IteratorType iend = asImp().template end&lt;cd,All_Partition&gt;();
<a name="l00315"></a>00315       <span class="keywordflow">for</span> (IteratorType it = asImp().template begin&lt;cd,All_Partition&gt;();
<a name="l00316"></a>00316            it != iend; ++it)
<a name="l00317"></a>00317       {
<a name="l00319"></a>00319         <span class="keywordflow">if</span> (it-&gt;level() == e.level() &amp;&amp; this-&gt;<a class="code" href="a00145.html#8ec792aaa5a02d0c78d1f2b1faf3eaf8" title="Map entity to index. The result of calling this method with an entity that is not...">index</a>(*it) == this-&gt;<a class="code" href="a00145.html#8ec792aaa5a02d0c78d1f2b1faf3eaf8" title="Map entity to index. The result of calling this method with an entity that is not...">index</a>(e)) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00320"></a>00320       }
<a name="l00321"></a>00321       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324   <span class="keyword">private</span>:
<a name="l00326"></a>00326           IndexSetImp&amp; asImp () {<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>IndexSetImp &amp;<span class="keyword">&gt;</span> (*this);}
<a name="l00328"></a>00328           <span class="keyword">const</span> IndexSetImp&amp; asImp ()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>IndexSetImp &amp;<span class="keyword">&gt;</span>(*this);}
<a name="l00329"></a>00329   };
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 
<a name="l00399"></a>00399   <span class="keyword">template</span>&lt;<span class="keyword">class</span> Gr<span class="keywordtype">id</span>Imp, <span class="keyword">class</span> IdSetImp, <span class="keyword">class</span> IdTypeImp&gt;
<a name="l00400"></a><a class="code" href="a00143.html">00400</a>   <span class="keyword">class </span><a class="code" href="a00143.html" title="Id Set Interface.">IdSet</a>
<a name="l00401"></a>00401   {
<a name="l00402"></a>00402   <span class="keyword">public</span>:
<a name="l00404"></a><a class="code" href="a00143.html#7da8f5ba2179b1896017b5b1016d6011">00404</a>         <span class="keyword">typedef</span> IdTypeImp <a class="code" href="a00143.html#7da8f5ba2179b1896017b5b1016d6011" title="Type used to represent an id.">IdType</a>;
<a name="l00405"></a>00405 
<a name="l00407"></a>00407     <span class="keyword">template</span>&lt;<span class="keyword">class</span> EntityType&gt;
<a name="l00408"></a><a class="code" href="a00143.html#bf34664075b273ca806abd02e0d7e929">00408</a>     <a class="code" href="a00143.html#7da8f5ba2179b1896017b5b1016d6011" title="Type used to represent an id.">IdType</a> <a class="code" href="a00143.html#bf34664075b273ca806abd02e0d7e929" title="Get id of an entity. This method is simpler to use than the one below.">id</a> (<span class="keyword">const</span> EntityType&amp; e)<span class="keyword"> const</span>
<a name="l00409"></a>00409 <span class="keyword">    </span>{
<a name="l00410"></a>00410       <span class="keyword">enum</span> { cc = EntityType::codimension };
<a name="l00411"></a>00411       <span class="keywordflow">return</span> asImp().template id&lt;cc&gt;(e);
<a name="l00412"></a>00412     }
<a name="l00413"></a>00413 
<a name="l00415"></a>00415     <span class="comment">/*</span>
<a name="l00416"></a>00416 <span class="comment">      We use the remove_const to extract the Type from the mutable class,</span>
<a name="l00417"></a>00417 <span class="comment">      because the const class is not instatiated yet.</span>
<a name="l00418"></a>00418 <span class="comment">    */</span>
<a name="l00419"></a>00419     <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> cc&gt;
<a name="l00420"></a><a class="code" href="a00143.html#97a56eb56eb73e75d71864ef607454d9">00420</a>     <a class="code" href="a00143.html#7da8f5ba2179b1896017b5b1016d6011" title="Type used to represent an id.">IdType</a> <a class="code" href="a00143.html#bf34664075b273ca806abd02e0d7e929" title="Get id of an entity. This method is simpler to use than the one below.">id</a> (<span class="keyword">const</span> <span class="keyword">typename</span> remove_const&lt;GridImp&gt;::type::
<a name="l00421"></a>00421                  Traits::template Codim&lt;cc&gt;::Entity&amp; e)<span class="keyword"> const </span>
<a name="l00422"></a>00422 <span class="keyword">    </span>{
<a name="l00423"></a>00423       <span class="keywordflow">return</span> asImp().template id&lt;cc&gt;(e);
<a name="l00424"></a>00424     }
<a name="l00425"></a>00425 
<a name="l00427"></a>00427     <span class="comment">/*</span>
<a name="l00428"></a>00428 <span class="comment">      We use the remove_const to extract the Type from the mutable class,</span>
<a name="l00429"></a>00429 <span class="comment">      because the const class is not instatiated yet.</span>
<a name="l00430"></a>00430 <span class="comment">    */</span>
<a name="l00431"></a>00431     <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> cc&gt;
<a name="l00432"></a><a class="code" href="a00143.html#de819cc2781f5ae2a1f634c17c315ae5">00432</a>     <a class="code" href="a00143.html#7da8f5ba2179b1896017b5b1016d6011" title="Type used to represent an id.">IdType</a> <a class="code" href="a00143.html#de819cc2781f5ae2a1f634c17c315ae5" title="Get id of subentity i of codim cc of a codim 0 entity.">subId</a> (<span class="keyword">const</span> <span class="keyword">typename</span> remove_const&lt;GridImp&gt;::type::
<a name="l00433"></a>00433                     Traits::template Codim&lt;0&gt;::Entity&amp; e, <span class="keywordtype">int</span> i)<span class="keyword"> const</span>
<a name="l00434"></a>00434 <span class="keyword">    </span>{
<a name="l00435"></a>00435       <span class="keywordflow">return</span> asImp().template subId&lt;cc&gt;(e,i);
<a name="l00436"></a>00436     }
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     <span class="comment">// Default constructor (is not provided automatically because copy constructor is private)</span>
<a name="l00439"></a>00439     <a class="code" href="a00143.html" title="Id Set Interface.">IdSet</a>() {}
<a name="l00440"></a>00440 
<a name="l00441"></a>00441    <span class="keyword">private</span>:
<a name="l00443"></a>00443     IdSet(<span class="keyword">const</span> IdSet&amp;);
<a name="l00445"></a>00445     IdSet&amp; operator=(<span class="keyword">const</span> IdSet&amp;);
<a name="l00446"></a>00446 
<a name="l00448"></a>00448           IdSetImp&amp; asImp () {<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>IdSetImp &amp;<span class="keyword">&gt;</span> (*this);}
<a name="l00450"></a>00450           <span class="keyword">const</span> IdSetImp&amp; asImp ()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>IdSetImp &amp;<span class="keyword">&gt;</span>(*this);}
<a name="l00451"></a>00451   };
<a name="l00452"></a>00452 
<a name="l00466"></a>00466   <span class="keyword">template</span>&lt;<span class="keyword">class</span> Gr<span class="keywordtype">id</span>Imp, <span class="keyword">class</span> IdSetImp, <span class="keyword">class</span> IdTypeImp&gt;
<a name="l00467"></a><a class="code" href="a00144.html">00467</a>   <span class="keyword">class </span><a class="code" href="a00144.html" title="Id Set DefaultImplementation.">IdSetDefaultImplementation</a> : <span class="keyword">public</span> <a class="code" href="a00143.html" title="Id Set Interface.">IdSet</a>&lt;GridImp,IdSetImp,IdTypeImp&gt;
<a name="l00468"></a>00468   {
<a name="l00469"></a>00469   <span class="keyword">public</span>:
<a name="l00471"></a><a class="code" href="a00144.html#3b176eb9afcc423087d950b5a346e29b">00471</a>           <span class="keyword">typedef</span> IdTypeImp <a class="code" href="a00144.html#3b176eb9afcc423087d950b5a346e29b" title="define the type used for persistent indices">IdType</a>;
<a name="l00472"></a>00472 
<a name="l00474"></a>00474     <span class="comment">/*</span>
<a name="l00475"></a>00475 <span class="comment">      We use the remove_const to extract the Type from the mutable class,</span>
<a name="l00476"></a>00476 <span class="comment">      because the const class is not instatiated yet.</span>
<a name="l00477"></a>00477 <span class="comment">      This default implementation uses the entity's entity() method. This is</span>
<a name="l00478"></a>00478 <span class="comment">      slow but works by default for ervery id set implementation.</span>
<a name="l00479"></a>00479 <span class="comment">    */</span>
<a name="l00480"></a>00480     <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> cc&gt;
<a name="l00481"></a><a class="code" href="a00144.html#61bf7625f7feea4ec10a4ca04ae7a257">00481</a>     <a class="code" href="a00144.html#3b176eb9afcc423087d950b5a346e29b" title="define the type used for persistent indices">IdType</a> <a class="code" href="a00144.html#61bf7625f7feea4ec10a4ca04ae7a257" title="get id of subentity i of codim cc">subId</a> (<span class="keyword">const</span> <span class="keyword">typename</span> remove_const&lt;GridImp&gt;::type::
<a name="l00482"></a>00482                     Traits::template Codim&lt;0&gt;::Entity&amp; e, <span class="keywordtype">int</span> i)<span class="keyword"> const</span>
<a name="l00483"></a>00483 <span class="keyword">    </span>{
<a name="l00484"></a>00484       <span class="keywordflow">return</span> this-&gt;<a class="code" href="a00143.html#bf34664075b273ca806abd02e0d7e929" title="Get id of an entity. This method is simpler to use than the one below.">id</a>( *(e.template entity&lt;cc&gt;(i)) );
<a name="l00485"></a>00485     }
<a name="l00486"></a>00486   };
<a name="l00487"></a>00487 
<a name="l00488"></a>00488 
<a name="l00489"></a>00489 }
<a name="l00490"></a>00490 <span class="preprocessor">#endif</span>
</pre></div></div>
</div> <!-- end doxygen -->
</div> <!-- end main -->
<div class="foot">

<p class="foot">
  Generated on 6 Nov 2008 with <a
  href="http://www.doxygen.org/">Doxygen</a> (ver 1.5.6)  
  [<a href="doxygen.log">logfile</a>].
</p>

</div>

</body>
</html>
