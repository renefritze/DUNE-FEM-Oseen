<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>dune-grid: Dune::Torus&lt; d &gt; Class Template Reference (dune-grid )</title>
  <link rel="stylesheet" type="text/css" href="./dune-doxy.css">
  <link rel="stylesheet" type="text/css" href="./tabs.css">
</head>
<div class="main">
<div class="doxygen">
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="a00441.html">Dune</a>::<a class="el" href="a00280.html">Torus</a>
  </div>
</div>
<div class="contents">
<h1>Dune::Torus&lt; d &gt; Class Template Reference</h1><!-- doxytag: class="Dune::Torus" --><code>#include &lt;<a class="el" href="a00617.html">grids.hh</a>&gt;</code>
<p>

<p>
<a href="a00901.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;int d&gt;<br>
 class Dune::Torus&lt; d &gt;</h3>

<a class="el" href="a00280.html">Torus</a> provides all the functionality to handle a toroidal communication structure:<p>
<ul>
<li>Map a set of processes (given by an MPI communicator) to a torus of dimension d. The "optimal" torus dimensions are determined by a coarse mesh. The maximum side length is minimized.</li></ul>
<p>
<ul>
<li>Provide lists of neighboring processes and a method for nearest neighbor exchange using asynchronous communication with MPI. The periodic case is handled where one process might have to exchange several messages with the same process. (Logically, a process has always <img class="formulaInl" alt="$3^d-1$" src="form_147.png"> neighbors, but several of these logical neighbors might be identical)</li></ul>
<p>
<ul>
<li>Provide means to partition a grid to the torus. </li></ul>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4adc59dea7328099f636e7d978b877cb"></a><!-- doxytag: member="Dune::Torus::iTupel" ref="4adc59dea7328099f636e7d978b877cb" args="" -->
typedef FieldVector&lt; int, d &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">type used to pass tupels in and out <br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="99d118ae1f0dc133c974927bc2f04c1e"></a><!-- doxytag: member="Dune::Torus::Torus" ref="99d118ae1f0dc133c974927bc2f04c1e" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#99d118ae1f0dc133c974927bc2f04c1e">Torus</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">constructor making uninitialized object <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="76ca3d1055ed2d86a900493d784c4d07"></a><!-- doxytag: member="Dune::Torus::Torus" ref="76ca3d1055ed2d86a900493d784c4d07" args="(MPI_Comm comm, int tag, iTupel size)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#76ca3d1055ed2d86a900493d784c4d07">Torus</a> (MPI_Comm comm, int tag, <a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">make partitioner from communicator and coarse mesh size <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="224f82289a447cbfecd50321ec3ba4aa"></a><!-- doxytag: member="Dune::Torus::rank" ref="224f82289a447cbfecd50321ec3ba4aa" args="() const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#224f82289a447cbfecd50321ec3ba4aa">rank</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return own rank <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="56bbc31a70b7b56e300ff1aaef61aef9"></a><!-- doxytag: member="Dune::Torus::coord" ref="56bbc31a70b7b56e300ff1aaef61aef9" args="() const " -->
<a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#56bbc31a70b7b56e300ff1aaef61aef9">coord</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return own coordinates <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cc1be56fea6bb33bc2594c86e20f3624"></a><!-- doxytag: member="Dune::Torus::procs" ref="cc1be56fea6bb33bc2594c86e20f3624" args="() const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#cc1be56fea6bb33bc2594c86e20f3624">procs</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return number of processes <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d644437a102c8187b065d21f79f20628"></a><!-- doxytag: member="Dune::Torus::dims" ref="d644437a102c8187b065d21f79f20628" args="() const " -->
const <a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#d644437a102c8187b065d21f79f20628">dims</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return dimensions of torus <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a97327c0cb14457cbdc391d156c70016"></a><!-- doxytag: member="Dune::Torus::dims" ref="a97327c0cb14457cbdc391d156c70016" args="(int i) const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#a97327c0cb14457cbdc391d156c70016">dims</a> (int i) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return dimensions of torus in direction i <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e2900a1f366962caa110f00382ae2472"></a><!-- doxytag: member="Dune::Torus::comm" ref="e2900a1f366962caa110f00382ae2472" args="() const " -->
MPI_Comm&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#e2900a1f366962caa110f00382ae2472">comm</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return MPI communicator <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7162e481081e4ce538633c583e3aeb4f"></a><!-- doxytag: member="Dune::Torus::tag" ref="7162e481081e4ce538633c583e3aeb4f" args="() const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#7162e481081e4ce538633c583e3aeb4f">tag</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return tag used by torus <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6e63df7cb83e6c0f13f8c6290f79c51c"></a><!-- doxytag: member="Dune::Torus::inside" ref="6e63df7cb83e6c0f13f8c6290f79c51c" args="(iTupel c) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#6e63df7cb83e6c0f13f8c6290f79c51c">inside</a> (<a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> c) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return true if coordinate is inside torus <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cf0165d70e493bed9fdf958c7ccffe10"></a><!-- doxytag: member="Dune::Torus::rank_to_coord" ref="cf0165d70e493bed9fdf958c7ccffe10" args="(int rank) const " -->
<a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#cf0165d70e493bed9fdf958c7ccffe10">rank_to_coord</a> (int rank) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">map rank to coordinate in torus using lexicographic ordering <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c8a9ec295ad2e936e231b8dcec7485d7"></a><!-- doxytag: member="Dune::Torus::coord_to_rank" ref="c8a9ec295ad2e936e231b8dcec7485d7" args="(iTupel coord) const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#c8a9ec295ad2e936e231b8dcec7485d7">coord_to_rank</a> (<a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> coord) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">map coordinate in torus to rank using lexicographic ordering <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3be7ce850eeaf2ce7d0b72a2af15634"></a><!-- doxytag: member="Dune::Torus::rank_relative" ref="a3be7ce850eeaf2ce7d0b72a2af15634" args="(int rank, int dir, int cnt) const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#a3be7ce850eeaf2ce7d0b72a2af15634">rank_relative</a> (int rank, int dir, int cnt) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return rank of process where its coordinate in direction dir has offset cnt (handles periodic case) <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6cd4fd1543e11fd2c2a74f73655ca9c5"></a><!-- doxytag: member="Dune::Torus::color" ref="6cd4fd1543e11fd2c2a74f73655ca9c5" args="(const iTupel &amp;coord) const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#6cd4fd1543e11fd2c2a74f73655ca9c5">color</a> (const <a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> &amp;coord) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">assign color to given coordinate <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d85137f16639795f749712e2f06d5ce6"></a><!-- doxytag: member="Dune::Torus::color" ref="d85137f16639795f749712e2f06d5ce6" args="(int rank) const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#d85137f16639795f749712e2f06d5ce6">color</a> (int rank) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">assign color to given rank <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0399cffe0a9566d1bb1f5107298fe5d3"></a><!-- doxytag: member="Dune::Torus::neighbors" ref="0399cffe0a9566d1bb1f5107298fe5d3" args="() const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#0399cffe0a9566d1bb1f5107298fe5d3">neighbors</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return the number of neighbors, which is <img class="formulaInl" alt="$3^d-1$" src="form_147.png"> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cb07dd5722671d93001a085c1baf5616"></a><!-- doxytag: member="Dune::Torus::is_neighbor" ref="cb07dd5722671d93001a085c1baf5616" args="(iTupel delta, bTupel periodic) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#cb07dd5722671d93001a085c1baf5616">is_neighbor</a> (<a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> delta, bTupel periodic) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return true if neighbor with given delta is a neighbor under the given periodicity <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2e5c7d96b422b75621651355b1dc4d5e"></a><!-- doxytag: member="Dune::Torus::partition" ref="2e5c7d96b422b75621651355b1dc4d5e" args="(int rank, iTupel origin_in, iTupel size_in, iTupel &amp;origin_out, iTupel &amp;size_out) const " -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#2e5c7d96b422b75621651355b1dc4d5e">partition</a> (int rank, <a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> origin_in, <a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> size_in, <a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> &amp;origin_out, <a class="el" href="a00280.html#4adc59dea7328099f636e7d978b877cb">iTupel</a> &amp;size_out) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">partition the given grid onto the torus and return the piece of the process with given rank; returns load imbalance <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7d404bca911fe0c9ba1fc560629bef15"></a><!-- doxytag: member="Dune::Torus::sendbegin" ref="7d404bca911fe0c9ba1fc560629bef15" args="() const " -->
<a class="el" href="a00281.html">ProcListIterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#7d404bca911fe0c9ba1fc560629bef15">sendbegin</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">first process in send list <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ec79ec4ff8519317e7118214c4422c9a"></a><!-- doxytag: member="Dune::Torus::sendend" ref="ec79ec4ff8519317e7118214c4422c9a" args="() const " -->
<a class="el" href="a00281.html">ProcListIterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#ec79ec4ff8519317e7118214c4422c9a">sendend</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">end of send list <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6385f2e5a12b55ddfa8dee6a44c0c82e"></a><!-- doxytag: member="Dune::Torus::recvbegin" ref="6385f2e5a12b55ddfa8dee6a44c0c82e" args="() const " -->
<a class="el" href="a00281.html">ProcListIterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#6385f2e5a12b55ddfa8dee6a44c0c82e">recvbegin</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">first process in receive list <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3b2a93bef9ff4966d04347481254f953"></a><!-- doxytag: member="Dune::Torus::recvend" ref="3b2a93bef9ff4966d04347481254f953" args="() const " -->
<a class="el" href="a00281.html">ProcListIterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#3b2a93bef9ff4966d04347481254f953">recvend</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">last process in receive list <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="db682dc170bda4114f3c8fe38b5a3916"></a><!-- doxytag: member="Dune::Torus::send" ref="db682dc170bda4114f3c8fe38b5a3916" args="(int rank, void *buffer, int size) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#db682dc170bda4114f3c8fe38b5a3916">send</a> (int rank, void *buffer, int size) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">store a send request; buffers are sent in order; handles also local requests with memcpy <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e38ba363998da139f724251a42a9ca27"></a><!-- doxytag: member="Dune::Torus::recv" ref="e38ba363998da139f724251a42a9ca27" args="(int rank, void *buffer, int size) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#e38ba363998da139f724251a42a9ca27">recv</a> (int rank, void *buffer, int size) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">store a receive request; buffers are received in order; handles also local requests with memcpy <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2eef6969946021638682c48aea181c75"></a><!-- doxytag: member="Dune::Torus::exchange" ref="2eef6969946021638682c48aea181c75" args="() const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#2eef6969946021638682c48aea181c75">exchange</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">exchange messages stored in request buffers; clear request buffers afterwards <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="03cdbfe218a4af238b0725df2377f436"></a><!-- doxytag: member="Dune::Torus::global_sum" ref="03cdbfe218a4af238b0725df2377f436" args="(double x) const " -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#03cdbfe218a4af238b0725df2377f436">global_sum</a> (double x) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">global sum <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3ee731083ecb93b5cae74b51e7147d43"></a><!-- doxytag: member="Dune::Torus::global_max" ref="3ee731083ecb93b5cae74b51e7147d43" args="(double x) const " -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#3ee731083ecb93b5cae74b51e7147d43">global_max</a> (double x) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">global max <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="eb2eb1da805711556ccf775d7428b63c"></a><!-- doxytag: member="Dune::Torus::global_min" ref="eb2eb1da805711556ccf775d7428b63c" args="(double x) const " -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#eb2eb1da805711556ccf775d7428b63c">global_min</a> (double x) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">global min <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e7e3838eb93140ceeeeb568473adc907"></a><!-- doxytag: member="Dune::Torus::print" ref="e7e3838eb93140ceeeeb568473adc907" args="(std::ostream &amp;s) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00280.html#e7e3838eb93140ceeeeb568473adc907">print</a> (std::ostream &amp;s) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">print contents of torus object <br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00281.html">ProcListIterator</a></td></tr>

</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="a00617.html">grids.hh</a></ul>
</div>
</div> <!-- end doxygen -->
</div> <!-- end main -->
<div class="foot">

<p class="foot">
  Generated on 6 Nov 2008 with <a
  href="http://www.doxygen.org/">Doxygen</a> (ver 1.5.6)  
  [<a href="doxygen.log">logfile</a>].
</p>

</div>

</body>
</html>
