<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>dune-grid: dgfgridtype.hh File Reference (dune-grid )</title>
  <link rel="stylesheet" type="text/css" href="./dune-doxy.css">
  <link rel="stylesheet" type="text/css" href="./tabs.css">
</head>
<div class="main">
<div class="doxygen">
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_5edca94048dae04696b7e65d07cd8e9c.html">grid</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_3cbbda19b620c3b02e4a6bd399f608fa.html">io</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_65252ab1f1f5370a7d40c0347a12070d.html">file</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_4cee72c778d9005e899e49441c1b0610.html">dgfparser</a>
  </div>
</div>
<div class="contents">
<h1>dgfgridtype.hh File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
A simple strategy for defining a grid type depending on defines set during the make proecess:. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Robert Kloefkorn <div class="fragment"><pre class="fragment"><span class="preprocessor"> #if defined ALBERTAGRID &amp;&amp; HAVE_ALBERTA</span>
<span class="preprocessor"></span>  <span class="keyword">typedef</span> <a class="code" href="a00002.html" title="[ provides Dune::Grid ]">Dune::AlbertaGrid&lt;dimworld,dimworld&gt;</a> <a class="code" href="a00299.html">GridType</a>;
<span class="preprocessor"> #elif defined ALUGRID_CUBE &amp;&amp; HAVE_ALUGRID</span>
<span class="preprocessor"></span>  <span class="keyword">typedef</span> <a class="code" href="a00050.html" title="[ provides Dune::Grid ]">Dune::ALUCubeGrid&lt;dimworld,dimworld&gt;</a> GridType;
<span class="preprocessor"> #elif defined ALUGRID_SIMPLEX &amp;&amp; HAVE_ALUGRID</span>
<span class="preprocessor"></span>  <span class="keyword">typedef</span> <a class="code" href="a00054.html" title="[ provides Dune::Grid ]">Dune::ALUSimplexGrid&lt;dimworld,dimworld&gt;</a> GridType;
<span class="preprocessor"> #elif defined ONEDGRID</span>
<span class="preprocessor"></span>   <span class="keyword">typedef</span> <a class="code" href="a00224.html" title="[ provides Dune::Grid ] Onedimensional adaptive gridThis implementation of the grid...">Dune::OneDGrid</a> GridType;
<span class="preprocessor"> #elif defined SGRID</span>
<span class="preprocessor"></span>  <span class="keyword">typedef</span> <a class="code" href="a00262.html" title="[ provides Dune::Grid ]">Dune::SGrid&lt;dimworld,dimworld&gt;</a> GridType;
<span class="preprocessor"> #elif defined YASPGRID</span>
<span class="preprocessor"></span>  <span class="keyword">typedef</span> <a class="code" href="a00299.html" title="[ provides Dune::Grid ]">Dune::YaspGrid&lt;dimworld,dimworld&gt;</a> GridType;
<span class="preprocessor"> #else</span>
<span class="preprocessor"></span>  <span class="comment">// default GridType is YaspGrid </span>
  <span class="keyword">typedef</span> <a class="code" href="a00299.html" title="[ provides Dune::Grid ]">Dune::YaspGrid&lt;dimworld,dimworld&gt;</a> GridType;
<span class="preprocessor"> #endif</span>
</pre></div> The variable dimworld is determined by <div class="fragment"><pre class="fragment">   <span class="comment">// default value is 2</span>
   <span class="keyword">const</span> <span class="keywordtype">int</span> dimworld = GRIDDIM;
</pre></div> Remark:<ol type=1>
<li>By defauly Dune::YaspGrid&lt;2,2&gt; is used.</li><li>For <code>ALBERTAGRID</code> or <code>ALUGRID</code> with <code>dimworld=1</code> <a class="el" href="a00224.html" title="[ provides Dune::Grid ] Onedimensional adaptive gridThis implementation of the grid...">Dune::OneDGrid</a> is used.</li></ol>
</dd></dl>
To reduce differences between seriell and parallel runs as much as possible additional the Dune::MPIHelper class is used to toggle between serial and parallel runs via specialization of this class for runs using MPI und such that doesn't. To use this feature, the following code should always be called at the beginning of the function main: <div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;dune/grid/io/file/dgfparser/dgfgridtype.hh&gt;</span>
 
 ...

 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv, <span class="keywordtype">char</span> ** envp) {

   <span class="comment">// get reference to the singelton MPIHelper </span>
   MPIHelper &amp; mpiHelper = MPIHelper::instance(argc,argv);

   <span class="comment">// optional one can get rank and size from this little helper class</span>
   <span class="keywordtype">int</span> myrank = mpiHelper.rank();
   <span class="keywordtype">int</span> mysize = mpiHelper.size();

   ...
   <span class="comment">// construct the grid</span>
   GridPtr&lt;GridType&gt; grid(argv[1], mpiHelper.getCommunicator() );   

   GridType &amp; grid = *gridptr;
   ...

   <span class="comment">// as the MPIHelper is a singleton, on it's destruction the</span>
   <span class="comment">// MPI_Finalize() command is called. </span>
 }
</pre></div> To make use of this feature, one has to configure DUNE by using the <code>--with-grid-dim=1|2|3</code> and optional --with-grid-type=ALBERTAGRID | ALUGRID_CUBE | ALUGRID_SIMPLEX | ONEDGRID | SGRID | UGGRID | YASPGRID. This will add the following to the ALL_PKG_CPPFLAGS <div class="fragment"><pre class="fragment"> -DGRIDDIM=$(GRIDDIM) -DGRIDTYPE=$(GRIDTYPE) 
</pre></div> No by adding the <code>ALL_PKG_CPPFLAGS</code> or <code>GRIDDIM_CPPFLAGS</code> to the programs <code>CXXFLAGS</code> one can choose the grids dimension and type by invoking the following make command <div class="fragment"><pre class="fragment">  make GRIDDIM=3 GRIDTYPE=ALBERTAGRID myprogram
</pre></div> Here the value <code>3</code> for grid dimension and <code>ALBERTAGRID</code> for grid type are passed as pre-processoer variables to gridtype.hh and are then used to define the <code>typedef</code> <code>GridType</code>. 
<p>
<code>#include &lt;dune/grid/io/file/dgfparser/dgfyasp.hh&gt;</code><br>
<code>#include &lt;dune/grid/utility/gridtype.hh&gt;</code><br>

<p>
<a href="a00565.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
</div>
</div> <!-- end doxygen -->
</div> <!-- end main -->
<div class="foot">

<p class="foot">
  Generated on 6 Nov 2008 with <a
  href="http://www.doxygen.org/">Doxygen</a> (ver 1.5.6)  
  [<a href="doxygen.log">logfile</a>].
</p>

</div>

</body>
</html>
