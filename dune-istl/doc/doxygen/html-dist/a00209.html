<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>dune-istl: bdmatrix.hh Source File (dune-istl )</title>
  <link rel="stylesheet" type="text/css" href="./dune-doxy.css">
  <link rel="stylesheet" type="text/css" href="./tabs.css">
</head>
<div class="main">
<div class="doxygen">
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_39c25fa0261c9359275e2f8975608afb.html">istl</a>
  </div>
</div>
<div class="contents">
<h1>bdmatrix.hh</h1><a href="a00139.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef DUNE_BLOCK_DIAGONAL_MATRIX_HH</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define DUNE_BLOCK_DIAGONAL_MATRIX_HH</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;dune/istl/bcrsmatrix.hh&gt;</span>
<a name="l00005"></a>00005 
<a name="l00011"></a>00011 <span class="keyword">namespace </span>Dune {
<a name="l00021"></a>00021 <span class="keyword">template</span> &lt;<span class="keyword">class</span> B, <span class="keyword">class</span> A=ISTLAllocator&gt;
<a name="l00022"></a><a class="code" href="a00017.html">00022</a> <span class="keyword">class </span><a class="code" href="a00017.html" title="A block-diagonal matrix.">BDMatrix</a> : <span class="keyword">public</span> <a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix</a>&lt;B,A&gt;
<a name="l00023"></a>00023 {
<a name="l00024"></a>00024 <span class="keyword">public</span>:
<a name="l00025"></a>00025 
<a name="l00026"></a>00026     <span class="comment">//===== type definitions and constants</span>
<a name="l00027"></a>00027     
<a name="l00029"></a><a class="code" href="a00017.html#cec74fc3d562ac4df093fa22af4157a7">00029</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> B::field_type <a class="code" href="a00017.html#cec74fc3d562ac4df093fa22af4157a7" title="export the type representing the field">field_type</a>;
<a name="l00030"></a>00030     
<a name="l00032"></a><a class="code" href="a00017.html#37315671a5dc119250b434dbe47ce387">00032</a>     <span class="keyword">typedef</span> B <a class="code" href="a00017.html#37315671a5dc119250b434dbe47ce387" title="export the type representing the components">block_type</a>;
<a name="l00033"></a>00033     
<a name="l00035"></a><a class="code" href="a00017.html#63ac0af4f7339d621559892975f3a66b">00035</a>     <span class="keyword">typedef</span> A <a class="code" href="a00017.html#63ac0af4f7339d621559892975f3a66b" title="export the allocator type">allocator_type</a>;
<a name="l00036"></a>00036     
<a name="l00038"></a>00038     <span class="comment">//typedef BCRSMatrix&lt;B,A&gt;::row_type row_type;</span>
<a name="l00039"></a>00039 
<a name="l00041"></a><a class="code" href="a00017.html#0cb47f109df53828b4afdda036f01cc4">00041</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> A::size_type <a class="code" href="a00017.html#0cb47f109df53828b4afdda036f01cc4" title="implement row_type with compressed vector">size_type</a>;
<a name="l00042"></a>00042 
<a name="l00044"></a><a class="code" href="a00017.html#3d680b1180de787ab4a814d51f9dd6ba73f72d201354775dbc038ef6171d12bb">00044</a>     <span class="keyword">enum</span> {<a class="code" href="a00017.html#3d680b1180de787ab4a814d51f9dd6ba73f72d201354775dbc038ef6171d12bb" title="The number of blocklevels the matrix contains.">blocklevel</a> = B::blocklevel+1};
<a name="l00045"></a>00045 
<a name="l00047"></a><a class="code" href="a00017.html#1cd4eb27d43b98a522642ba722e3f15e">00047</a>     <a class="code" href="a00017.html#1cd4eb27d43b98a522642ba722e3f15e" title="Default constructor.">BDMatrix</a>() : <a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix</a>&lt;B,A&gt;() {}
<a name="l00048"></a>00048 
<a name="l00049"></a>00049     <span class="keyword">explicit</span> <a class="code" href="a00017.html#1cd4eb27d43b98a522642ba722e3f15e" title="Default constructor.">BDMatrix</a>(<span class="keywordtype">int</span> size) 
<a name="l00050"></a>00050         : <a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix</a>&lt;B,A&gt;(size, size, <a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix</a>&lt;B,A&gt;::<a class="code" href="a00014.html#6f09a4c408e14428d3a62ad00ceac9ecd05f70b8e286d23abee639a8d50552e3" title="Build entries randomly.">random</a>) {
<a name="l00051"></a>00051 
<a name="l00052"></a>00052         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;size; i++)
<a name="l00053"></a>00053             this-&gt;<a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix&lt;B,A&gt;::setrowsize</a>(i, 1);
<a name="l00054"></a>00054 
<a name="l00055"></a>00055         this-&gt;<a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix&lt;B,A&gt;::endrowsizes</a>();
<a name="l00056"></a>00056 
<a name="l00057"></a>00057         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;size; i++)
<a name="l00058"></a>00058             this-&gt;<a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix&lt;B,A&gt;::addindex</a>(i, i);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060         this-&gt;<a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix&lt;B,A&gt;::endindices</a>();
<a name="l00061"></a>00061 
<a name="l00062"></a>00062     }
<a name="l00063"></a>00063 
<a name="l00065"></a><a class="code" href="a00017.html#8502b6f5b906e54bdffcab57c0e1af34">00065</a>     <a class="code" href="a00017.html" title="A block-diagonal matrix.">BDMatrix</a>&amp; <a class="code" href="a00017.html#8502b6f5b906e54bdffcab57c0e1af34" title="assignment">operator= </a>(<span class="keyword">const</span> <a class="code" href="a00017.html" title="A block-diagonal matrix.">BDMatrix</a>&amp; other) {
<a name="l00066"></a>00066         this-&gt;<a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix&lt;B,A&gt;::operator=</a>(other);
<a name="l00067"></a>00067         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00068"></a>00068     }
<a name="l00069"></a>00069 
<a name="l00071"></a><a class="code" href="a00017.html#7cf5fcc3f358458afaa7610b8ad630d5">00071</a>     <a class="code" href="a00017.html" title="A block-diagonal matrix.">BDMatrix</a>&amp; <a class="code" href="a00017.html#8502b6f5b906e54bdffcab57c0e1af34" title="assignment">operator= </a>(<span class="keyword">const</span> <a class="code" href="a00017.html#cec74fc3d562ac4df093fa22af4157a7" title="export the type representing the field">field_type</a>&amp; k) {
<a name="l00072"></a>00072         this-&gt;<a class="code" href="a00014.html" title="A sparse block matrix with compressed row storage.">BCRSMatrix&lt;B,A&gt;::operator=</a>(k);
<a name="l00073"></a>00073         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00074"></a>00074     }
<a name="l00075"></a>00075 
<a name="l00077"></a><a class="code" href="a00017.html#fa1b54794751a02b7a9228299a04fe72">00077</a>     <span class="keywordtype">void</span> <a class="code" href="a00017.html#fa1b54794751a02b7a9228299a04fe72" title="Inverts the matrix.">invert</a>() {
<a name="l00078"></a>00078         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;this-&gt;<a class="code" href="a00014.html#cba88df8004f0727d3bf3e15823738d3" title="number of rows (counted in blocks)">N</a>(); i++)
<a name="l00079"></a>00079             (*<span class="keyword">this</span>)[i][i].invert();
<a name="l00080"></a>00080     }
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="keyword">private</span>:        
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     <span class="comment">// ////////////////////////////////////////////////////////////////////////////</span>
<a name="l00085"></a>00085     <span class="comment">//   The following methods from the base class should now actually be called</span>
<a name="l00086"></a>00086     <span class="comment">// ////////////////////////////////////////////////////////////////////////////</span>
<a name="l00087"></a>00087 
<a name="l00088"></a>00088     <span class="comment">// createbegin and createend should be in there, too, but I can't get it to compile</span>
<a name="l00089"></a>00089     <span class="comment">//     BCRSMatrix&lt;B,A&gt;::CreateIterator createbegin () {}</span>
<a name="l00090"></a>00090     <span class="comment">//     BCRSMatrix&lt;B,A&gt;::CreateIterator createend () {}</span>
<a name="l00091"></a>00091     <span class="keywordtype">void</span> setrowsize (<a class="code" href="a00017.html#0cb47f109df53828b4afdda036f01cc4" title="implement row_type with compressed vector">size_type</a> i, <a class="code" href="a00017.html#0cb47f109df53828b4afdda036f01cc4" title="implement row_type with compressed vector">size_type</a> s) {}
<a name="l00092"></a>00092     <span class="keywordtype">void</span> incrementrowsize (<a class="code" href="a00017.html#0cb47f109df53828b4afdda036f01cc4" title="implement row_type with compressed vector">size_type</a> i) {}
<a name="l00093"></a>00093     <span class="keywordtype">void</span> endrowsizes () {}
<a name="l00094"></a>00094     <span class="keywordtype">void</span> addindex (<a class="code" href="a00017.html#0cb47f109df53828b4afdda036f01cc4" title="implement row_type with compressed vector">size_type</a> row, <a class="code" href="a00017.html#0cb47f109df53828b4afdda036f01cc4" title="implement row_type with compressed vector">size_type</a> col) {}
<a name="l00095"></a>00095     <span class="keywordtype">void</span> endindices () {}
<a name="l00096"></a>00096 };
<a name="l00099"></a>00099 }  <span class="comment">// end namespace Dune</span>
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 <span class="preprocessor">#endif</span>
</pre></div></div>
</div> <!-- end doxygen -->
</div> <!-- end main -->
<div class="foot">

<p class="foot">
  Generated on 6 Nov 2008 with <a
  href="http://www.doxygen.org/">Doxygen</a> (ver 1.5.6)  
  [<a href="doxygen.log">logfile</a>].
</p>

</div>

</body>
</html>
