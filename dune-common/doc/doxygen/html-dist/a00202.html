<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>dune-common: array.hh Source File (dune-common )</title>
  <link rel="stylesheet" type="text/css" href="./dune-doxy.css">
  <link rel="stylesheet" type="text/css" href="./tabs.css">
</head>
<div class="main">
<div class="doxygen">
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_2ca904c6ce82cf2d3dcac8fdc6f434f6.html">common</a>
  </div>
</div>
<div class="contents">
<h1>array.hh</h1><a href="a00135.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef DUNE_ARRAY_HH</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define DUNE_ARRAY_HH</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00008"></a>00008 <span class="preprocessor">#warning This file is deprecated.  Please use std::vector instead of Dune::Array!</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00010"></a>00010 <span class="preprocessor">#include&lt;iostream&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include&lt;iomanip&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include&lt;string&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include&lt;cassert&gt;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="preprocessor">#include&lt;rpc/rpc.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include"<a class="code" href="a00149.html" title="A few common exception classes.">exceptions.hh</a>"</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="keyword">namespace </span>Dune 
<a name="l00019"></a>00019 {
<a name="l00025"></a>00025 
<a name="l00026"></a>00026   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; 
<a name="l00027"></a><a class="code" href="a00005.html">00027</a>   <span class="keyword">class </span><a class="code" href="a00005.html" title="A simple dynamic array class.">Array</a> {
<a name="l00028"></a>00028   <span class="keyword">public</span>:
<a name="l00029"></a>00029   
<a name="l00033"></a><a class="code" href="a00006.html">00033</a>       <span class="keyword">class </span><a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a> {  
<a name="l00034"></a>00034       <span class="keyword">private</span>:          
<a name="l00035"></a>00035           T* p;         <span class="comment">// Iterator ist Zeiger auf Feldelement</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037       <span class="keyword">public</span>:        
<a name="l00039"></a>00039           <a class="code" href="a00191.html#g80b54a62210bef1e5eae3eb45bbdbf52" title="Default constructor.">Iterator</a>();
<a name="l00040"></a>00040  
<a name="l00042"></a>00042           <span class="keywordtype">bool</span> <a class="code" href="a00006.html#7a17dd959e7b54401bf5e560dad608ce" title="Inequality of two iterators.">operator!= </a>(<span class="keyword">const</span> <a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a>&amp; x);
<a name="l00043"></a>00043 
<a name="l00045"></a>00045           <span class="keywordtype">bool</span> <a class="code" href="a00006.html#d652e3eebd1408283efa62d2cc73ee5c" title="Equality of two iterators.">operator== </a>(<span class="keyword">const</span> <a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a>&amp; x);
<a name="l00046"></a>00046 
<a name="l00048"></a>00048           <a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a> <a class="code" href="a00191.html#g0b6e99caa52b02a9727ff48a4be0c74a" title="Prefix increment.">operator++ </a>();   <span class="comment">// prefix Stroustrup p. 292</span>
<a name="l00049"></a>00049           
<a name="l00051"></a>00051           <a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a> <a class="code" href="a00191.html#g0b6e99caa52b02a9727ff48a4be0c74a" title="Prefix increment.">operator++ </a>(<span class="keywordtype">int</span>);<span class="comment">// postfix</span>
<a name="l00052"></a>00052 
<a name="l00054"></a>00054           <span class="keyword">const</span> T&amp; <a class="code" href="a00191.html#g6dd5a6c4784ab021ae67be0135e3d165" title="Dereferencing.">operator* </a>() <span class="keyword">const</span>;
<a name="l00055"></a>00055 
<a name="l00057"></a>00057           <span class="keyword">const</span> T* <a class="code" href="a00191.html#g30279b6b38b8d3cab6163f1bee283c5e" title="selector">operator-&gt; </a>() <span class="keyword">const</span>; <span class="comment">// Stroustrup p. 289</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059           <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="a00005.html" title="A simple dynamic array class.">Array</a>&lt;T&gt;;
<a name="l00060"></a>00060         } ;
<a name="l00061"></a>00061 
<a name="l00063"></a>00063         <a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a> <a class="code" href="a00191.html#g04bfc0dc215764f4d0f0544c9aeb1ebb" title="Return iterator refering to first element in array.">begin</a> () <span class="keyword">const</span>; 
<a name="l00064"></a>00064 
<a name="l00066"></a>00066         <a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a> <a class="code" href="a00191.html#gad3fcc3d6ac7c80b6b30bf33648abfc0" title="Return iterator refering to one past the last element of the array.">end</a> () <span class="keyword">const</span>;
<a name="l00067"></a>00067 
<a name="l00069"></a>00069         <a class="code" href="a00191.html#g4aacc3a111a4ff2353ea2ff93a410a1a" title="make empty array">Array</a>();
<a name="l00070"></a>00070         
<a name="l00072"></a>00072         <span class="keyword">explicit</span> <a class="code" href="a00191.html#g4aacc3a111a4ff2353ea2ff93a410a1a" title="make empty array">Array</a>(<span class="keywordtype">int</span> m);
<a name="l00073"></a>00073 
<a name="l00075"></a>00075         <a class="code" href="a00191.html#g4aacc3a111a4ff2353ea2ff93a410a1a" title="make empty array">Array</a> (<span class="keyword">const</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;</a>&amp;);
<a name="l00076"></a>00076 
<a name="l00078"></a>00078         <a class="code" href="a00191.html#g225f341e109cd3a122ab84584e3ee36c" title="destructor">~Array</a>();
<a name="l00079"></a>00079 
<a name="l00081"></a>00081         <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;</a>&amp; <a class="code" href="a00191.html#gde6b7dfc79f0021c4a314a03f8d913f7" title="assignment of two arrays">operator= </a>(<span class="keyword">const</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;</a>&amp;);
<a name="l00082"></a>00082 
<a name="l00084"></a>00084         <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;</a>&amp; <a class="code" href="a00191.html#gde6b7dfc79f0021c4a314a03f8d913f7" title="assignment of two arrays">operator= </a>(<span class="keyword">const</span> T&amp; a);
<a name="l00085"></a>00085 
<a name="l00087"></a>00087         <span class="keywordtype">void</span> <a class="code" href="a00191.html#gdeb2730e24ef28a1562b3c0a8fe2ada5" title="reallocate array with size m">resize</a> (<span class="keywordtype">int</span> m);
<a name="l00088"></a>00088 
<a name="l00090"></a><a class="code" href="a00005.html#7c32eec23d726876e91036ca53853ae5">00090</a>       <span class="keywordtype">void</span> <a class="code" href="a00005.html#7c32eec23d726876e91036ca53853ae5">realloc</a> (<span class="keywordtype">int</span> m) {<a class="code" href="a00191.html#gdeb2730e24ef28a1562b3c0a8fe2ada5" title="reallocate array with size m">resize</a>(m);}
<a name="l00091"></a>00091 
<a name="l00093"></a><a class="code" href="a00005.html#0fa6d9ed87286c87cf3a1317d626234c">00093</a>       <span class="keywordtype">void</span> <a class="code" href="a00005.html#0fa6d9ed87286c87cf3a1317d626234c" title="just for some tests">swap</a> ( <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;</a> &amp;copy)
<a name="l00094"></a>00094       {
<a name="l00095"></a>00095         T *tmp = copy.<a class="code" href="a00005.html#f60c756afae953fbd02dcad500f56d26">p</a>;
<a name="l00096"></a>00096         copy.<a class="code" href="a00005.html#f60c756afae953fbd02dcad500f56d26">p</a> = p;
<a name="l00097"></a>00097         p = tmp;
<a name="l00098"></a>00098        
<a name="l00099"></a>00099         <span class="keywordtype">int</span> fake=copy.<a class="code" href="a00005.html#c053ceca36d4b1c2798c21efa5e1573c">n</a>;
<a name="l00100"></a>00100         copy.<a class="code" href="a00005.html#c053ceca36d4b1c2798c21efa5e1573c">n</a> = n;
<a name="l00101"></a>00101         n = fake;
<a name="l00102"></a>00102       }
<a name="l00103"></a>00103       
<a name="l00105"></a>00105       <span class="keywordtype">int</span> <a class="code" href="a00191.html#g543bcf839c951ed82c9b3351299c06dc" title="return number of components in array">size</a> () <span class="keyword">const</span>;
<a name="l00106"></a>00106 
<a name="l00108"></a><a class="code" href="a00005.html#4b18d0a4504bf8a9e107bcb7ec4270b7">00108</a>       <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keyword">const</span> T&amp; v) {
<a name="l00109"></a>00109           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="a00191.html#g543bcf839c951ed82c9b3351299c06dc" title="return number of components in array">size</a>(); ++i)
<a name="l00110"></a>00110               (*<span class="keyword">this</span>)[i] = v;
<a name="l00111"></a>00111       }
<a name="l00112"></a>00112 
<a name="l00114"></a>00114       T&amp; <a class="code" href="a00191.html#gb57eddb704a44ef55dd3473dda605997" title="random access operator">operator[]</a>(<span class="keywordtype">int</span> i);
<a name="l00115"></a>00115 
<a name="l00117"></a>00117       <span class="keyword">const</span> T&amp; <a class="code" href="a00191.html#gb57eddb704a44ef55dd3473dda605997" title="random access operator">operator[]</a>(<span class="keywordtype">int</span> i) <span class="keyword">const</span>;
<a name="l00118"></a>00118 
<a name="l00120"></a><a class="code" href="a00005.html#d1b814ee5a7a34b59aa9a879f04f9753">00120</a>       <span class="keyword">typedef</span> T <a class="code" href="a00005.html#d1b814ee5a7a34b59aa9a879f04f9753" title="export base type of array">MemberType</a>;  
<a name="l00121"></a>00121       <span class="keyword">typedef</span> T value_type; <span class="comment">// definition conforming to STL  </span>
<a name="l00122"></a>00122 
<a name="l00129"></a><a class="code" href="a00005.html#7ddb61fc5059ca90eb9c3d553679a4d8">00129</a>       <span class="keywordtype">void</span> <a class="code" href="a00005.html#7ddb61fc5059ca90eb9c3d553679a4d8" title="Print contents of the array to cout.">print</a> (<span class="keywordtype">int</span> k, std::string s, std::string row)
<a name="l00130"></a>00130         {
<a name="l00131"></a>00131           <span class="keywordtype">char</span> buf[96];
<a name="l00132"></a>00132           std::cout &lt;&lt; s &lt;&lt; <span class="stringliteral">" size="</span> &lt;&lt; n &lt;&lt; <span class="stringliteral">" {"</span> &lt;&lt; std::endl;
<a name="l00133"></a>00133           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n/k; i++)
<a name="l00134"></a>00134                 {
<a name="l00135"></a>00135                   sprintf(buf,<span class="stringliteral">"%4d"</span>,k*i);
<a name="l00136"></a>00136                   std::cout &lt;&lt; buf &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; row &lt;&lt; <span class="stringliteral">" "</span>;
<a name="l00137"></a>00137                   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=i*k; j&lt;(i+1)*k; j++)
<a name="l00138"></a>00138                         {
<a name="l00139"></a>00139                           sprintf(buf,<span class="stringliteral">"%10.3E "</span>,p[j]);
<a name="l00140"></a>00140                           std::cout &lt;&lt; buf;
<a name="l00141"></a>00141                         }
<a name="l00142"></a>00142                   std::cout &lt;&lt; std::endl;
<a name="l00143"></a>00143                 }
<a name="l00144"></a>00144           <span class="keywordtype">int</span> i = (n/k)*k;
<a name="l00145"></a>00145           <span class="keywordflow">if</span> (i&lt;n)
<a name="l00146"></a>00146                 {
<a name="l00147"></a>00147                   sprintf(buf,<span class="stringliteral">"%4d"</span>,i);
<a name="l00148"></a>00148                   std::cout &lt;&lt; buf &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; row &lt;&lt; <span class="stringliteral">" "</span>;
<a name="l00149"></a>00149                   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=i; j&lt;n; j++)
<a name="l00150"></a>00150                         {
<a name="l00151"></a>00151                           sprintf(buf,<span class="stringliteral">"%10.3E "</span>,p[j]);
<a name="l00152"></a>00152                           std::cout &lt;&lt; buf;
<a name="l00153"></a>00153                         }
<a name="l00154"></a>00154                   std::cout &lt;&lt; std::endl;
<a name="l00155"></a>00155                 }
<a name="l00156"></a>00156           std::cout &lt;&lt; <span class="stringliteral">"}"</span> &lt;&lt; std::endl;          
<a name="l00157"></a>00157         }
<a name="l00158"></a>00158 
<a name="l00161"></a><a class="code" href="a00005.html#deea85a3902de3bdb10e90f35aa108d1">00161</a>       <span class="keywordtype">bool</span> <a class="code" href="a00005.html#deea85a3902de3bdb10e90f35aa108d1">processXdr</a>(XDR *xdrs)
<a name="l00162"></a>00162       {
<a name="l00163"></a>00163         <span class="keywordflow">if</span>(xdrs != NULL)
<a name="l00164"></a>00164         {
<a name="l00165"></a>00165           <span class="keywordtype">int</span> len = n;
<a name="l00166"></a>00166           xdr_int( xdrs, &amp;len );
<a name="l00167"></a>00167           <span class="keywordflow">if</span>(len != n) <a class="code" href="a00191.html#gdeb2730e24ef28a1562b3c0a8fe2ada5" title="reallocate array with size m">resize</a>(len);
<a name="l00168"></a>00168           xdr_vector(xdrs,(<span class="keywordtype">char</span> *) p,n,<span class="keyword">sizeof</span>(T),(xdrproc_t)xdr_double);
<a name="l00169"></a>00169           <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00170"></a>00170         }
<a name="l00171"></a>00171         <span class="keywordflow">else</span> 
<a name="l00172"></a>00172           <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00173"></a>00173       }
<a name="l00174"></a>00174     
<a name="l00175"></a>00175       T * raw()
<a name="l00176"></a>00176       {
<a name="l00177"></a>00177         <span class="keywordflow">return</span> p;
<a name="l00178"></a>00178       }
<a name="l00179"></a>00179   <span class="keyword">protected</span>:
<a name="l00180"></a>00180       <span class="keywordtype">int</span> n;  <span class="comment">// Anzahl Elemente; n=0 heisst, dass kein array allokiert ist!</span>
<a name="l00181"></a>00181       T *p;   <span class="comment">// Zeiger auf built-in array</span>
<a name="l00182"></a>00182   } ;
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 
<a name="l00186"></a>00186   <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00187"></a><a class="code" href="a00191.html#g04bfc0dc215764f4d0f0544c9aeb1ebb">00187</a>   <span class="keyword">inline</span> <span class="keyword">typename</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator</a> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::begin</a> ()<span class="keyword"> const</span>
<a name="l00188"></a>00188 <span class="keyword">  </span>{
<a name="l00189"></a>00189         <a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a> tmp;  <span class="comment">// hat Zeiger 0</span>
<a name="l00190"></a>00190         tmp.<a class="code" href="a00006.html#ec9b006b3f3d19c6883f13d881790d3f">p</a> = p;     <span class="comment">// Zeiger auf Feldelement 0</span>
<a name="l00191"></a>00191         <span class="keywordflow">return</span> tmp;
<a name="l00192"></a>00192   }
<a name="l00193"></a>00193   
<a name="l00195"></a>00195   <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00196"></a><a class="code" href="a00191.html#gad3fcc3d6ac7c80b6b30bf33648abfc0">00196</a>   <span class="keyword">inline</span> <span class="keyword">typename</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator</a> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::end</a> ()<span class="keyword"> const</span>
<a name="l00197"></a>00197 <span class="keyword">  </span>{
<a name="l00198"></a>00198         <a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a> tmp;
<a name="l00199"></a>00199         tmp.<a class="code" href="a00006.html#ec9b006b3f3d19c6883f13d881790d3f">p</a> = &amp;(p[n]); <span class="comment">// Zeiger auf Feldelement NACH letztem !</span>
<a name="l00200"></a>00200         <span class="keywordflow">return</span> tmp;      <span class="comment">// das funktioniert: Stroustrup p. 92.</span>
<a name="l00201"></a>00201   }
<a name="l00202"></a>00202 
<a name="l00206"></a>00206   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00207"></a><a class="code" href="a00191.html#g225f341e109cd3a122ab84584e3ee36c">00207</a>   <span class="keyword">inline</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::~Array</a> () 
<a name="l00208"></a>00208   { 
<a name="l00209"></a>00209         <span class="keywordflow">if</span> (n&gt;0) <span class="keyword">delete</span>[] p; 
<a name="l00210"></a>00210   }
<a name="l00211"></a>00211   
<a name="l00215"></a>00215   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00216"></a><a class="code" href="a00191.html#g4aacc3a111a4ff2353ea2ff93a410a1a">00216</a>   <span class="keyword">inline</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Array</a> () : n(0), p(0) {}
<a name="l00217"></a>00217   
<a name="l00221"></a>00221   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00222"></a><a class="code" href="a00191.html#g442a5e5236bb859fb24bcb5765f02618">00222</a>   <span class="keyword">inline</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Array</a> (<span class="keywordtype">int</span> m) : n(m) ,p(0)
<a name="l00223"></a>00223   {
<a name="l00224"></a>00224         <span class="keywordflow">if</span> (n&lt;=0)
<a name="l00225"></a>00225           {
<a name="l00226"></a>00226                 n = 0;
<a name="l00227"></a>00227                 <span class="keywordflow">return</span>;
<a name="l00228"></a>00228           }
<a name="l00229"></a>00229         <span class="keywordflow">try</span> {
<a name="l00230"></a>00230           p = <span class="keyword">new</span> T[n];
<a name="l00231"></a>00231         }
<a name="l00232"></a>00232         <span class="keywordflow">catch</span> (std::bad_alloc) {
<a name="l00233"></a>00233             <a class="code" href="a00149.html#d7fce127d6eaabe773adbc409514f21e">DUNE_THROW</a>(<a class="code" href="a00095.html" title="Default exception if memory allocation fails.">OutOfMemoryError</a>, <span class="stringliteral">"Not enough memory!"</span>);
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235   }
<a name="l00236"></a>00236 
<a name="l00240"></a>00240   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00241"></a><a class="code" href="a00191.html#gdeb2730e24ef28a1562b3c0a8fe2ada5">00241</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::resize</a> (<span class="keywordtype">int</span> m)
<a name="l00242"></a>00242   {
<a name="l00243"></a>00243         <span class="keywordflow">if</span> (m!=n)
<a name="l00244"></a>00244           {
<a name="l00245"></a>00245                 <span class="keywordflow">if</span> (n&gt;0) 
<a name="l00246"></a>00246                 {
<a name="l00247"></a>00247                   <span class="keyword">delete</span>[] p;
<a name="l00248"></a>00248                   p = NULL;
<a name="l00249"></a>00249                 }
<a name="l00250"></a>00250                 n = m;
<a name="l00251"></a>00251                 <span class="keywordflow">if</span> (n==0) 
<a name="l00252"></a>00252                 {
<a name="l00253"></a>00253                   p = NULL;
<a name="l00254"></a>00254                   <span class="keywordflow">return</span>;
<a name="l00255"></a>00255                 }
<a name="l00256"></a>00256                 <span class="keywordflow">try</span> {
<a name="l00257"></a>00257                   p = <span class="keyword">new</span> T[n];
<a name="l00258"></a>00258                 }
<a name="l00259"></a>00259                 <span class="keywordflow">catch</span> (std::bad_alloc) {
<a name="l00260"></a>00260                     <a class="code" href="a00149.html#d7fce127d6eaabe773adbc409514f21e">DUNE_THROW</a>(<a class="code" href="a00095.html" title="Default exception if memory allocation fails.">OutOfMemoryError</a>, <span class="stringliteral">"Not enough memory!"</span>);
<a name="l00261"></a>00261                 }
<a name="l00262"></a>00262           }
<a name="l00263"></a>00263      <span class="keywordflow">return</span>;    
<a name="l00264"></a>00264   }
<a name="l00265"></a>00265 
<a name="l00266"></a>00266   <span class="comment">/* \brief Copy-constructor</span>
<a name="l00267"></a>00267 <span class="comment">     Implements deep copy.</span>
<a name="l00268"></a>00268 <span class="comment">  */</span>
<a name="l00269"></a>00269   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00270"></a><a class="code" href="a00191.html#g7255bd0cd112e1e6d1f2f026866eb066">00270</a>   <span class="keyword">inline</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Array</a> (<span class="keyword">const</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;</a>&amp; a)
<a name="l00271"></a>00271   {
<a name="l00272"></a>00272         <span class="comment">// Erzeuge Feld mit selber Groesse wie a</span>
<a name="l00273"></a>00273         n = a.<a class="code" href="a00005.html#c053ceca36d4b1c2798c21efa5e1573c">n</a>;
<a name="l00274"></a>00274         <span class="keywordflow">if</span> (n&gt;0)
<a name="l00275"></a>00275           {
<a name="l00276"></a>00276                 <span class="keywordflow">try</span> {
<a name="l00277"></a>00277                   p = <span class="keyword">new</span> T[n];
<a name="l00278"></a>00278                 }
<a name="l00279"></a>00279                 <span class="keywordflow">catch</span> (std::bad_alloc) {
<a name="l00280"></a>00280                     <a class="code" href="a00149.html#d7fce127d6eaabe773adbc409514f21e">DUNE_THROW</a>(<a class="code" href="a00095.html" title="Default exception if memory allocation fails.">OutOfMemoryError</a>, <span class="stringliteral">"Not enough memory!"</span>);
<a name="l00281"></a>00281                 }
<a name="l00282"></a>00282           }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284         <span class="comment">// und kopiere Elemente</span>
<a name="l00285"></a>00285         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n; i=i+1) p[i]=a.<a class="code" href="a00005.html#f60c756afae953fbd02dcad500f56d26">p</a>[i];
<a name="l00286"></a>00286   }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   <span class="comment">/* \brief Assignment operator</span>
<a name="l00289"></a>00289 <span class="comment">   */</span>
<a name="l00290"></a>00290   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00291"></a><a class="code" href="a00191.html#gde6b7dfc79f0021c4a314a03f8d913f7">00291</a>   <span class="keyword">inline</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;</a>&amp; <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::operator= </a>(<span class="keyword">const</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;</a>&amp; a)
<a name="l00292"></a>00292   {
<a name="l00293"></a>00293         <span class="keywordflow">if</span> (&amp;a!=<span class="keyword">this</span>) <span class="comment">// nur bei verschiedenen Objekten was tun</span>
<a name="l00294"></a>00294           {
<a name="l00295"></a>00295                 <span class="keywordflow">if</span> (n!=a.<a class="code" href="a00005.html#c053ceca36d4b1c2798c21efa5e1573c">n</a>)
<a name="l00296"></a>00296                   {
<a name="l00297"></a>00297                         <span class="comment">// allokiere fuer this ein Feld der Groesse a.n</span>
<a name="l00298"></a>00298                         <span class="keywordflow">if</span> (n&gt;0) <span class="keyword">delete</span>[] p; <span class="comment">// altes Feld loeschen</span>
<a name="l00299"></a>00299                         n = a.<a class="code" href="a00005.html#c053ceca36d4b1c2798c21efa5e1573c">n</a>;
<a name="l00300"></a>00300                         <span class="keywordflow">if</span> (n&gt;0)
<a name="l00301"></a>00301                           {
<a name="l00302"></a>00302                                 <span class="keywordflow">try</span> {
<a name="l00303"></a>00303                                   p = <span class="keyword">new</span> T[n];
<a name="l00304"></a>00304                                 }
<a name="l00305"></a>00305                                 <span class="keywordflow">catch</span> (std::bad_alloc) {
<a name="l00306"></a>00306                                     <a class="code" href="a00149.html#d7fce127d6eaabe773adbc409514f21e">DUNE_THROW</a>(<a class="code" href="a00095.html" title="Default exception if memory allocation fails.">OutOfMemoryError</a>, <span class="stringliteral">"Not enough memory!"</span>);
<a name="l00307"></a>00307                                 }
<a name="l00308"></a>00308                           }
<a name="l00309"></a>00309                   }
<a name="l00310"></a>00310                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n; i++) p[i]=a.<a class="code" href="a00005.html#f60c756afae953fbd02dcad500f56d26">p</a>[i];
<a name="l00311"></a>00311           }
<a name="l00312"></a>00312         <span class="keywordflow">return</span> *<span class="keyword">this</span>; <span class="comment">// Gebe Referenz zurueck damit a=b=c; klappt</span>
<a name="l00313"></a>00313   }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315   <span class="comment">/* \brief Assignment operator</span>
<a name="l00316"></a>00316 <span class="comment">     All elements of the Array get the value a</span>
<a name="l00317"></a>00317 <span class="comment">  */</span>
<a name="l00318"></a>00318   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00319"></a><a class="code" href="a00191.html#g501fe29f9f7704991292b959b77696d7">00319</a>   <span class="keyword">inline</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;</a>&amp; <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::operator= </a>(<span class="keyword">const</span> T&amp; a)
<a name="l00320"></a>00320   {
<a name="l00321"></a>00321         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n; i++) p[i]=a;
<a name="l00322"></a>00322         <span class="keywordflow">return</span> *<span class="keyword">this</span>; <span class="comment">// Gebe Referenz zurueck damit a=b=c; klappt</span>
<a name="l00323"></a>00323   }
<a name="l00324"></a>00324   
<a name="l00325"></a>00325   <span class="comment">/* \brief Access operator</span>
<a name="l00326"></a>00326 <span class="comment">     Accessing of elements in Array. With bounds check.</span>
<a name="l00327"></a>00327 <span class="comment">   */</span>
<a name="l00328"></a>00328   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00329"></a><a class="code" href="a00191.html#gb57eddb704a44ef55dd3473dda605997">00329</a>   <span class="keyword">inline</span> T&amp; <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::operator[] </a>(<span class="keywordtype">int</span> i)
<a name="l00330"></a>00330   {
<a name="l00331"></a>00331       assert( ((i&lt;0) || (i&gt;=<a class="code" href="a00191.html#g543bcf839c951ed82c9b3351299c06dc" title="return number of components in array">size</a>()) ? (std::cout &lt;&lt; std::endl &lt;&lt; i &lt;&lt; <span class="stringliteral">" i|size "</span> &lt;&lt; <a class="code" href="a00191.html#g543bcf839c951ed82c9b3351299c06dc" title="return number of components in array">size</a>() &lt;&lt; std::endl, 0) : 1));
<a name="l00332"></a>00332       <span class="keywordflow">return</span> p[i];
<a name="l00333"></a>00333   }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   <span class="comment">/* \brief Access operator</span>
<a name="l00336"></a>00336 <span class="comment">     Accessing of elements in Array. With bounds check. Const version</span>
<a name="l00337"></a>00337 <span class="comment">  */</span>
<a name="l00338"></a>00338   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00339"></a><a class="code" href="a00191.html#g9529780ac424202d2389ac7cbcd3f47d">00339</a>   <span class="keyword">inline</span> <span class="keyword">const</span> T&amp; <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::operator[] </a>(<span class="keywordtype">int</span> i)<span class="keyword"> const</span>
<a name="l00340"></a>00340 <span class="keyword">  </span>{
<a name="l00341"></a>00341       assert(i&gt;=0);
<a name="l00342"></a>00342       assert(i&lt;<a class="code" href="a00191.html#g543bcf839c951ed82c9b3351299c06dc" title="return number of components in array">size</a>());
<a name="l00343"></a>00343       <span class="keywordflow">return</span> p[i];
<a name="l00344"></a>00344   }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346   <span class="comment">/* \brief Size of Array</span>
<a name="l00347"></a>00347 <span class="comment">   */</span>
<a name="l00348"></a>00348   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00349"></a><a class="code" href="a00191.html#g543bcf839c951ed82c9b3351299c06dc">00349</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::size</a> ()<span class="keyword"> const</span>
<a name="l00350"></a>00350 <span class="keyword">  </span>{ 
<a name="l00351"></a>00351         <span class="keywordflow">return</span> n; 
<a name="l00352"></a>00352   }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354   <span class="comment">/* \brief Output operator</span>
<a name="l00355"></a>00355 <span class="comment">   */</span>
<a name="l00356"></a>00356   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00357"></a>00357   std::ostream&amp; operator&lt;&lt; (std::ostream&amp; s, const Array&lt;T&gt;&amp; a)
<a name="l00358"></a>00358   {
<a name="l00359"></a>00359         s &lt;&lt; <span class="stringliteral">"array "</span> &lt;&lt; a.size() &lt;&lt; <span class="stringliteral">" elements = ["</span> &lt;&lt; std::endl;
<a name="l00360"></a>00360         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;a.size(); i++)
<a name="l00361"></a>00361           s &lt;&lt; <span class="stringliteral">"    "</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">"  "</span> &lt;&lt; a[i] &lt;&lt; std::endl;
<a name="l00362"></a>00362         s &lt;&lt; <span class="stringliteral">"]"</span> &lt;&lt; std::endl;
<a name="l00363"></a>00363         <span class="keywordflow">return</span> s;
<a name="l00364"></a>00364   }
<a name="l00365"></a>00365 
<a name="l00367"></a>00367   <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00368"></a><a class="code" href="a00191.html#g80b54a62210bef1e5eae3eb45bbdbf52">00368</a>   <span class="keyword">inline</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator::Iterator</a> () 
<a name="l00369"></a>00369   {
<a name="l00370"></a>00370         p=0; <span class="comment">// nicht initialisierter Iterator</span>
<a name="l00371"></a>00371   }
<a name="l00372"></a>00372 
<a name="l00374"></a>00374   <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00375"></a>00375   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator::operator</a>!= 
<a name="l00376"></a>00376   (<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator</a>&amp; x)
<a name="l00377"></a>00377   {
<a name="l00378"></a>00378         <span class="keywordflow">return</span> p != x.p;
<a name="l00379"></a>00379   }
<a name="l00380"></a>00380 
<a name="l00382"></a>00382   <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00383"></a>00383   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator::operator</a>== 
<a name="l00384"></a>00384   (<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator</a>&amp; x)
<a name="l00385"></a>00385   {
<a name="l00386"></a>00386         <span class="keywordflow">return</span> p == x.p;
<a name="l00387"></a>00387   }
<a name="l00388"></a>00388 
<a name="l00390"></a>00390   <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00391"></a><a class="code" href="a00191.html#g0b6e99caa52b02a9727ff48a4be0c74a">00391</a>   <span class="keyword">inline</span> <span class="keyword">typename</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator</a> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator::operator++ </a>() <span class="comment">// prefix</span>
<a name="l00392"></a>00392   {
<a name="l00393"></a>00393         p++;  <span class="comment">// C Zeigerarithmetik: p zeigt auf naechstes Feldelement</span>
<a name="l00394"></a>00394         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00395"></a>00395   }
<a name="l00396"></a>00396 
<a name="l00398"></a>00398   <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00399"></a><a class="code" href="a00191.html#gfc20cae176d4dac1082dfc59caa8a82b">00399</a>   <span class="keyword">inline</span> <span class="keyword">typename</span> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator</a> <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator::operator++ </a>(<span class="keywordtype">int</span>) <span class="comment">// postfix</span>
<a name="l00400"></a>00400   {
<a name="l00401"></a>00401         <a class="code" href="a00006.html" title="An iterator to access all components of array.">Iterator</a> tmp = *<span class="keyword">this</span>;
<a name="l00402"></a>00402         ++*<span class="keyword">this</span>;
<a name="l00403"></a>00403         <span class="keywordflow">return</span> tmp;
<a name="l00404"></a>00404   }
<a name="l00405"></a>00405 
<a name="l00407"></a>00407   <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00408"></a><a class="code" href="a00191.html#g6dd5a6c4784ab021ae67be0135e3d165">00408</a>   <span class="keyword">inline</span> <span class="keyword">const</span> T&amp; <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator::operator* </a>()<span class="keyword"> const</span>
<a name="l00409"></a>00409 <span class="keyword">  </span>{
<a name="l00410"></a>00410         <span class="keywordflow">return</span> *p;
<a name="l00411"></a>00411   }
<a name="l00412"></a>00412                 
<a name="l00414"></a>00414   <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00415"></a><a class="code" href="a00191.html#g30279b6b38b8d3cab6163f1bee283c5e">00415</a>   <span class="keyword">inline</span> <span class="keyword">const</span> T* <a class="code" href="a00005.html" title="A simple dynamic array class.">Array&lt;T&gt;::Iterator::operator-&gt; </a>()<span class="keyword"> const</span>
<a name="l00416"></a>00416 <span class="keyword">  </span>{
<a name="l00417"></a>00417         <span class="keywordflow">return</span> p;
<a name="l00418"></a>00418   }
<a name="l00419"></a>00419 
<a name="l00422"></a>00422 } <span class="comment">// end namespace Dune</span>
<a name="l00423"></a>00423 <span class="preprocessor">#endif</span>
</pre></div></div>
</div> <!-- end doxygen -->
</div> <!-- end main -->
<div class="foot">

<p class="foot">
  Generated on 6 Nov 2008 with <a
  href="http://www.doxygen.org/">Doxygen</a> (ver 1.5.6)  
  [<a href="doxygen.log">logfile</a>].
</p>

</div>

</body>
</html>
